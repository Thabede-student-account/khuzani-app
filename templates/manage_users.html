{% extends 'base.html' %}
{% block content %}
<h1 class="text-2xl font-bold text-blue-900 mb-6 text-center">Manage Users</h1>
{% if message %}
<p class="text-green-500 text-center mb-4">{{ message }}</p>
{% endif %}
{% if error %}
<p class="text-red-500 text-center mb-4">{{ error }}</p>
{% endif %}
<div class="space-y-6">
    <div>
        <h2 class="text-xl text-blue-900 mb-2">Add User</h2>
        <form method="POST" class="space-y-4">
            <input type="hidden" name="action" value="add">
            <div>
                <label for="username" class="block text-blue-900">Username</label>
                <input type="text" name="username" id="username" class="w-full p-2 rounded bg-white bg-opacity-50 focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
            <div>
                <label for="password" class="block text-blue-900">Password</label>
                <input type="password" name="password" id="password" class="w-full p-2 rounded bg-white bg-opacity-50 focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
            <div>
                <label for="role" class="block text-blue-900">Role</label>
                <select name="role" id="role" class="w-full p-2 rounded bg-white bg-opacity-50 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="Administrator">Administrator</option>
                    <option value="Investor">Investor</option>
                    <option value="Researcher">Researcher</option>
                </select>
            </div>
            <button type="submit" class="btn w-full p-2 bg-blue-600 text-white rounded">Add</button>
        </form>
    </div>
    <div>
        <h2 class="text-xl text-blue-900 mb-2">Edit/Delete User</h2>
        <form method="POST" class="space-y-4">
            <input type="hidden" name="action" value="edit">
            <div>
                <label for="username" class="block text-blue-900">Username</label>
                <input type="text" name="username" id="username" class="w-full p-2 rounded bg-white bg-opacity-50 focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
            <div>
                <label for="password" class="block text-blue-900">New Password (optional)</label>
                <input type="password" name="password" id="password" class="w-full p-2 rounded bg-white bg-opacity-50 focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
            <div>
                <label for="role" class="block text-blue-900">New Role (optional)</label>
                <select name="role" id="role" class="w-full p-2 rounded bg-white bg-opacity-50 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="">None</option>
                    <option value="Administrator">Administrator</option>
                    <option value="Investor">Investor</option>
                    <option value="Researcher">Researcher</option>
                </select>
            </div>
            <button type="submit" class="btn w-full p-2 bg-blue-600 text-white rounded">Edit</button>
            <button type="submit" formaction="{{ url_for('manage_users') }}" name="action" value="delete" class="btn w-full p-2 bg-red-600 text-white rounded">Delete</button>
        </form>
    </div>
    <h2 class="text-xl text-blue-900 mb-2">Users</h2>
    <table class="w-full text-blue-900">
        <tr class="bg-blue-600 text-white">
            <th class="p-2">Role</th>
            <th class="p-2">Username</th>
            <th class="p-2">Password</th>
        </tr>
        {% for user in users %}
        <tr class="bg-white bg-opacity-50">
            <td class="p-2">{{ user.Role }}</td>
            <td class="p-2">{{ user.Username }}</td>
            <td class="p-2">{{ user.Password }}</td>
        </tr>
        {% endfor %}
    </table>
    <a href="{{ url_for('admin_dashboard') }}" class="btn block p-2 bg-gray-600 text-white rounded text-center mt-4">Back</a>
</div>
{% endblock %}
